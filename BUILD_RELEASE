
To build a new release, a few steps are required. This will be enhanced in the future.

1. Update FireCamp software release version
1) Change the version in Makefile from "latest" to the release version such as "1.0".
2) Chagne the version in common/types.go from "latest" to the release version such as "1.0".
3) Update the "Release" to such as "1.0" in firecamp-master.template and firecamp-existingvpc.template


2. Upload the new template files
Update the "QSCloudStaxS3KeyPrefix" from "master" to "latest" in firecamp-master.template and firecamp-existingvpc.template. Uploads the templates to cloudstax/latest/templates in the "cloudstax" bucket. And upload the init.sh script to cloudstax/latest/scripts.

AWS QuickStart always points to the latest version, such as aws/vpc/latest for QSAWSVPCS3KeyPrefix. '.' is not allowed in the key prefix. So we use "master" version to point to the templates of the master branch for development, and "latest" to point to the templates of the last release.


3. Docker Images
make docker to build the docker images for this release, and upload to docker hub. If Amazon ECS agent git creates a new version, update cloudstax/amazon-ecs-agent, build a new container and push to docker hub.


4. Create release packages
Currently FireCamp requires 2 packages: firecamp service cli and firecamp swarminit command. The swarminit command is used by packaging/aws-cloudformation/init.sh to initialize the Docker Swarm cluster. Every release will have its own packages. The packages are put under firecamp/packages/release in the "cloudstax" bucket.

Create the release packages folder, such as firecamp/packages/1.0, in the "cloudstax" bucket.
- upload $GOPATH/bin/firecamp-service-cli.tgz
- upload $GOPATH/bin/firecamp-swarminit.tgz


5. The plugin log file rotates
If vendor is updated, check to make sure the glog log file size is adjusted.

glog rotates the log file at MaxSize, glog_file.go, which is 1024*1024*1800 by default. Change to 64MB. So we could keep 20 log files for troubleshooting.
